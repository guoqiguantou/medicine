{"version":3,"sources":["webpack:///./src/pages/contract/eVisa.tsx","webpack:///./src/pages/contract/eVisa.tsx?a274"],"names":["ContractEVisa","forwardRef","router","useRouter","routerParams","id","loginId","useState","err","setErr","useEffect","console","props","type","payload","res","content","p","parseQuery","commonUtil","token","Taro","url","dispatch","tip","eleccontractDetail","getContractSign","contract","loading"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AASA;;AACA,IAAMA,aAAsC,gBAAGC,wDAAU,CAAC,sBAAqC;AAC3F,MAAMC,MAAM,GAAGC,8DAAf;AACA,MAAMC,YAAY,GAAGF,MAAM,CAFgE,MAE3F,CAF2F,CAEvD;;AAFuD,MAGnFG,EAHmF,GAGnED,YAHmE;AAAA,MAG/EE,OAH+E,GAGnEF,YAHmE;;AAAA,kBAIrEG,sDAAQ,CAJ6D,KAI7D,CAJ6D;AAAA;AAAA,MAIpFC,GAJoF;AAAA,MAI/EC,MAJ+E;;AAK3FC,yDAAS,CAAC,YAAM;AACZC,WAAO,CAAPA;;AACA,iBAAa;AACTC,WAAK,CAALA,SAAe;AAAEC,YAAI,EAAN;AAAiCC,eAAO,EAAE;AAAET,YAAE,EAAEC;AAAN;AAA1C,OAAfM,OAAiF,eAAS;AAAA,mBAClEG,GAAG,IAD+D;AAAA,YAC9EC,OAD8E;;AAEtF,YAAMC,CAAM,GAAGC,4EAAU,CAAzB,OAAyB,CAAzB;AACAC,qEAAU,CAAVA,aAAwBF,CAAC,CAAzBE;AACAA,qEAAU,CAAVA,UAAqBF,CAAC,CAAtBE;AACAR,eAAO,CAAPA,iBAAyBM,CAAC,CAA1BN,qBAAgDM,CAAC,CAAjDN;AACA,YAAIS,KAAK,GAAGD,6DAAU,CAAtB,QAAYA,EAAZ;;AACA,YAAI,CAAJ,OAAY;AACRE,6DAAI,CAAJA,WAAgB;AACZC,eAAG,EAAE;AADO,WAAhBD;AAGH;AAXLT;AAaH;;AAhBW,QAiBJW,QAjBI,GAiBSX,KAjBT;AAkBZW,YAAQ,CAAC;AACLV,UAAI,EADC;AACmCC,aAAO,EAAE;AAAE,wBAAgBT;AAAlB;AAD5C,KAAD,CAARkB,OAES,eAAO;AACZd,YAAM,CAANA,IAAM,CAANA;AACAe,gEAAG,CAAHA,SAAahB,GAAG,CAAhBgB;AACAb,aAAO,CAAPA;AALJY;AAlBK,KAATb,EAAS,CAATA;;AA2BA,6BAA2B;AAAA,QACfa,QADe,GACFX,KADE;AAEvBW,YAAQ,CAAC;AACLV,UAAI,EADC;AAC6BC,aAAO,EAAE;AAAE,wBAAgBT;AAAlB;AADtC,KAAD,CAARkB,MAEQ,eAAO;AACXA,cAAQ,CAAC;AACLV,YAAI,EADC;AACmCC,eAAO,EAAE;AAAE,0BAAgBT;AAAlB;AAD5C,OAAD,CAARkB,OAES,eAAO;AACZC,kEAAG,CAAHA,SAAahB,GAAG,CAAhBgB;AACAb,eAAO,CAAPA;AAJJY;AAHJA,aASS,eAAO;AACZC,gEAAG,CAAHA,SAAahB,GAAG,CAAhBgB;AACAb,aAAO,CAAPA;AAXJY;AAaH;;AA/C0F,MAgDrFE,kBAhDqF,GAgD9Db,KAAK,CAhDyD,QAgD9DA,CAhD8D;AAkD3F,sBACI;AAAM,aAAS,EAAC;AAAhB,kBACI;AAAQ,SAAK,EAAC;AAAd,IADJ,eAEI;AAAM,aAAS,EAAC;AAAhB,KACK,CAACa,kBAAkB,CAAlBA,cAAD,QAA0C,gBAAI;AAAA,wBAAK;AAAQ,SAAG,EAAX;AAAmB,SAAG,EAAtB;AAA8B,UAAI,EAAC;AAAnC,MAAL;AAHvD,GAGS,CADL,CAFJ,EAMSA,kBAAkB,IAAIA,kBAAkB,CAAlBA,eAAvB,CAACA,IAAD,aAA+D;AAAM,aAAS,EAAC;AAAhB,kBAC3D;AAAU,QAAI,EAAd;AAAyB,aAAS,EAAlC;AAA8C,YAAQ,EAAEb,KAAK,CAALA,WAAxD;AAA8E,WAAO,EAAEA,KAAK,CAA5F;AAAsG,WAAO,EAAEc;AAA/G,KARhB,0BAQgB,CAD2D,CANvE,CADJ;AAlDJ,CAAyD,CAAzD;AAkEe,4HAAO,CAAC;AAAA,MAAGC,QAAH;AAAA,MAAaJ,QAAb;AAAA,MAAuBK,OAAvB;AAAA,SAAsC;AACzDD,YAAQ,EADiD;AAEzDJ,YAAQ,EAFiD;AAGzDK,WAAO,EAAEA,OAAO,CAAPA;AAHgD,GAAtC;AAAR,CAAO,CAAP,CAAf,aAAe,CAAf,E;;;;;;;;;;;;;ACrFA;AAAA;AAAA;AAAkD;AACkE;AACpH,cAAc;;;AAGd,gBAAgB,wEAAgB,CAAC,iIAAS,4BAA4B,cAAc","file":"pages/contract/eVisa.js","sourcesContent":["import React, { FC, useEffect, forwardRef, useState } from 'react'\nimport Taro, { useRouter } from '@tarojs/taro'\nimport { connect } from 'react-redux'\nimport { View, Image } from '@tarojs/components'\nimport { AtButton } from \"taro-ui\"\nimport NavBar from '@/components/NavBar'\nimport tip from '@/utils/tip'\nimport commonUtil from '@/utils/common'\nimport { parseQuery } from '@/utils/stringUtil'\nimport './contract.less'\n\n\ninterface ContractDetailProps {\n    contract,\n    dispatch,\n    loading: boolean\n}\n\n/**电子签详情页面*/\nconst ContractEVisa: FC<ContractDetailProps> = forwardRef((props: ContractDetailProps, ref) => {\n    const router = useRouter();\n    const routerParams = router!.params;//获取页面参数\n    const { id, loginId } = routerParams;\n    const [err, setErr] = useState<boolean>(false)\n    useEffect(() => {\n        console.log(loginId, '===========')\n        if (loginId) {\n            props.dispatch({ type: 'common/contentMapping', payload: { id: loginId } }).then((res) => {\n                const { content } = res || {};\n                const p: any = parseQuery(content);\n                commonUtil.setCompanyId(p.companyId);\n                commonUtil.setShopId(p.shopId);\n                console.log('companyId', p.companyId, 'shopId', p.shopId, p, '===========')\n                let token = commonUtil.getToken();\n                if (!token) {\n                    Taro.navigateTo({\n                        url: '/pages/login/login',\n                    });\n                }\n            })\n        }\n        const { dispatch } = props;\n        dispatch({\n            type: 'contract/getEleccontractDetail', payload: { \"bmContractId\": id }\n        }).catch(err => {\n            setErr(true)\n            tip.showTips(err.msg)\n            console.log(err)\n        })\n    }, [])\n\n    function getContractSign() {\n        const { dispatch } = props;\n        dispatch({\n            type: 'contract/getContractSign', payload: { \"bmContractId\": id }\n        }).then(res => {\n            dispatch({\n                type: 'contract/getEleccontractDetail', payload: { \"bmContractId\": id }\n            }).catch(err => {\n                tip.showTips(err.msg)\n                console.log(err)\n            })\n        }).catch(err => {\n            tip.showTips(err.msg)\n            console.log(err)\n        })\n    }\n    let { eleccontractDetail } = props.contract;\n\n    return (\n        <View className='contractEVisa fixedView'>\n            <NavBar title=\"电子签\" />\n            <View className=\"eVisaView\">\n                {(eleccontractDetail.imgUrlList || []).map(item => (< Image src={item} key={item} mode=\"aspectFit\" />))}\n            </View>\n            {\n                (eleccontractDetail && eleccontractDetail.auntSigned !== 1) && <View className=\"fixedBtnView\">\n                    <AtButton type='primary' className=\"fixedBtn\" disabled={props.loading || err} loading={props.loading} onClick={getContractSign}>确认签署</AtButton>\n                </View>\n            }\n\n        </View>\n    )\n})\n\nexport default connect(({ contract, dispatch, loading }) => ({\n    contract,\n    dispatch,\n    loading: loading.effects['contract/getContractSign'],\n}))(ContractEVisa)\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/mini-runner/node_modules/babel-loader/lib/index.js!./eVisa.tsx\"\nvar config = {\"navigationBarTitleText\":\"电子签\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/contract/eVisa', {}, config || {}))\n\n"],"sourceRoot":""}