{"version":3,"sources":["webpack:///./src/pages/contract/detail.tsx","webpack:///./src/pages/contract/detail.tsx?3bc8"],"names":["useDidShow","Taro","ContractDetail","forwardRef","loadDetail","id","dispatch","props","type","payload","list","current","urls","url","item","contractDetail","classnames","text","status","disabledText","moment","commonUtil","onImageClick","gotoEVisa","elecContractId","yellowText","contract"],"mappings":"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","file":"pages/contract/detail.js","sourcesContent":["import React, { FC, useEffect, forwardRef } from 'react';\r\nimport Taro from '@tarojs/taro';\r\nimport { connect } from 'react-redux';\r\nimport { View, Text, Image } from '@tarojs/components';\r\nimport { AtButton } from 'taro-ui';\r\nimport NavBar from '@/components/NavBar';\r\nimport Card from '@/components/Card';\r\nimport classnames from 'classnames';\r\nimport moment from 'moment';\r\nimport commonUtil from '@/utils/common';\r\nimport './contract.less';\r\nimport { CONTACT_STATE } from \"@/common/constant\";\r\nconst useDidShow = Taro.useDidShow;\r\n\r\ninterface ContractDetailProps {\r\n  contract;\r\n  dispatch;\r\n}\r\n\r\n/**合同详情页面\r\n * 合同状态说明：state= 0 =>已取消;state= 1且serviceState=1 =>履行中;\r\n * state= 1且serviceState=2 =>已完成;state= 1且serviceState=0 =>已签约\r\n */\r\nconst ContractDetail: FC<ContractDetailProps> = forwardRef(\r\n  (props: ContractDetailProps, ref) => {\r\n    // useEffect(() => {\r\n    //   loadDetail();\r\n    // }, []);\r\n\r\n    useDidShow(() => {\r\n      loadDetail();\r\n    });\r\n\r\n    const loadDetail = () => {\r\n      const { id } = Taro.getCurrentInstance()!.router!.params;\r\n      const { dispatch } = props;\r\n      dispatch({\r\n        type: 'contract/queryContractDetail',\r\n        payload: { id: id },\r\n      });\r\n      return () => {\r\n        dispatch({\r\n          type: 'contract/clearDetail',\r\n        });\r\n      };\r\n    }\r\n\r\n\r\n\r\n    function onImageClick(item: string, list: string[] = [item]) {\r\n      Taro.previewImage({\r\n        current: item,\r\n        urls: list,\r\n      });\r\n    }\r\n\r\n    function gotoEVisa(item) {\r\n      Taro.navigateTo({\r\n        url: `/pages/contract/eVisa?id=${item.elecContractId}`,\r\n      });\r\n    }\r\n\r\n    let { contractDetail } = props.contract;\r\n\r\n    return (\r\n      <View className='contractDetail fixedView'>\r\n        <NavBar title=\"合同详情\" />\r\n        <View className=\"detailTop\">\r\n          <View className=\"topItem\">\r\n            <Text className=\"text\">合同编号: {contractDetail.id}</Text>\r\n            <Text className={classnames({\r\n              text: true,\r\n              status: true,\r\n              disabledText: contractDetail.state === 0,\r\n            })}>\r\n              {/*{\r\n                contractDetail.state == 0 ? '已取消' : {\r\n                  0: '已签约',\r\n                  1: '履行中',\r\n                  2: '已完成'\r\n                }[contractDetail.serviceState]\r\n              }*/}\r\n              {\r\n                (CONTACT_STATE.find(item => item.state == contractDetail.state) || {}).title\r\n              }\r\n            </Text>\r\n          </View>\r\n          <View className=\"topItem\">\r\n            <Text className=\"text\">服务类型: {contractDetail.productName}</Text>\r\n          </View>\r\n          <View className=\"topItem\">\r\n            <Text className=\"text\">业务员: {contractDetail.addUserName}</Text>\r\n          </View>\r\n        </View>\r\n        <Card>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">客户姓名:</Text>\r\n            <View className=\"listText\">{contractDetail.customerName}</View>\r\n          </View>\r\n          {/* <View className=\"listItem\">\r\n                <Text className=\"listTitle\">手机号:</Text>\r\n                <View className=\"listText\">{contractDetail.customerPhone}</View>\r\n              </View> */}\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">身份证号:</Text>\r\n            <View className=\"listText\">{contractDetail.customerIdcard}</View>\r\n          </View>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">客户地址:</Text>\r\n            <View className=\"listText\">\r\n              {contractDetail.province}\r\n              {contractDetail.city}\r\n              {contractDetail.district}\r\n              {contractDetail.address}\r\n            </View>\r\n          </View>\r\n        </Card>\r\n\r\n        <Card>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">工资发放日:</Text>\r\n            <View\r\n              className=\"listText\">{contractDetail.grentSalaryDay ? `每月${contractDetail.grentSalaryDay}日` : '-'}</View>\r\n          </View>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">约定定金:</Text>\r\n            <View className=\"listText\">{contractDetail.deposit ? (contractDetail.deposit / 100) + '元' : '-'}</View>\r\n          </View>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">约定尾款:</Text>\r\n            <View\r\n              className=\"listText\">{contractDetail.balancePayment ? (contractDetail.balancePayment / 100) + '元' : '-'}</View>\r\n          </View>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">预产期:</Text>\r\n            <View className=\"listText\">{contractDetail.dueTime ? contractDetail.dueTime.split(' ')[0] : '-'}</View>\r\n          </View>\r\n        </Card>\r\n\r\n        <Card>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">家政员姓名:</Text>\r\n            <View className=\"listText\">{contractDetail.auntName}</View>\r\n          </View>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">合同开始日期:</Text>\r\n            <View className=\"listText\">\r\n              {moment(contractDetail.effectTime).format('YYYY.MM.DD')}\r\n            </View>\r\n          </View>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">合同结束日期:</Text>\r\n            <View className=\"listText\">\r\n              {moment(contractDetail.expireTime).format('YYYY.MM.DD')}\r\n            </View>\r\n          </View>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">是否住家:</Text>\r\n            <View className=\"listText\">\r\n              {contractDetail.liveIn == 1 ? '住家' : '不住家'}\r\n            </View>\r\n          </View>\r\n          {contractDetail.restDays && (\r\n            <View className=\"listItem\">\r\n              <Text className=\"listTitle\">月休息天数:</Text>\r\n              <View className=\"listText\">{contractDetail.restDays}天</View>\r\n            </View>\r\n          )}\r\n        </Card>\r\n        <Card>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">客户服务费:</Text>\r\n            <View className=\"listText\">\r\n              {commonUtil.con_number_format(contractDetail.customerMidFee)}元\r\n            </View>\r\n          </View>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">家政员服务费:</Text>\r\n            <View className=\"listText\">\r\n              {commonUtil.con_number_format(contractDetail.auntMidFee)}元\r\n            </View>\r\n          </View>\r\n          <View className=\"listItem\">\r\n            <Text className=\"listTitle\">家政员工资:</Text>\r\n            <View className=\"listText\">\r\n              {commonUtil.con_number_format(contractDetail.auntSalary)}元\r\n            </View>\r\n          </View>\r\n          {contractDetail.remark && (\r\n            <View className=\"listItem\">\r\n              <Text className=\"listTitle\">备注信息:</Text>\r\n              <View className=\"listText\">{contractDetail.remark}</View>\r\n            </View>\r\n          )}\r\n          {contractDetail.sideAgreement && (\r\n            <View className=\"listItem\">\r\n              <Text className=\"listTitle\">补充协议:</Text>\r\n              <View className=\"listText\">{contractDetail.sideAgreement}</View>\r\n            </View>\r\n          )}\r\n          {(contractDetail?.enclosureList || []).length > 0 && (\r\n            <View className=\"listItem\">\r\n              <Text className=\"listTitle\">附件:</Text>\r\n              <View className=\"listText\">\r\n                {(contractDetail?.enclosureList || []).map(item => {\r\n                  return (\r\n                    <Image\r\n                      key={item}\r\n                      mode=\"aspectFill\"\r\n                      src={item}\r\n                      className=\"listImage\"\r\n                      onClick={() => {\r\n                        onImageClick(item, contractDetail?.enclosureList || []);\r\n                      }}\r\n                    />\r\n                  );\r\n                })}\r\n              </View>\r\n            </View>\r\n          )}\r\n        </Card>\r\n        <View className=\"fixedBtnView\">\r\n          <AtButton type='primary' className=\"fixedBtn\" onClick={() => {\r\n            gotoEVisa(contractDetail)\r\n          }} disabled={!contractDetail.elecContractId}>查看电子签<Text className={classnames({\r\n            yellowText: contractDetail.auntSignFlag == 1 && contractDetail.elecContractId\r\n          })}>({\r\n                contractDetail.elecContractId ? contractDetail.auntSignFlag == 1 ? '已签署' : '待签署' : '未发起'\r\n              })</Text></AtButton>\r\n        </View>\r\n      </View>\r\n    )\r\n  })\r\n\r\nexport default connect(({ contract, dispatch }) => ({\r\n  contract,\r\n  dispatch,\r\n}))(ContractDetail);\r\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/mini-runner/node_modules/babel-loader/lib/index.js!./detail.tsx\"\nvar config = {\"navigationBarTitleText\":\"合同详情\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/contract/detail', {}, config || {}))\n\n"],"sourceRoot":""}