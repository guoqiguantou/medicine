{"version":3,"sources":["webpack:///./src/pages/mine/cumulatReward/cumulatReward.tsx","webpack:///./src/pages/mine/cumulatReward/cumulatReward.less","webpack:///./src/pages/mine/cumulatReward/cumulatReward.tsx?6320"],"names":["stateList","CumulatReward","dispatch","props","mine","count","useState","scrolling","setScrolling","pageNum","setPageNum","list","setList","pageSize","useDidShow","type","_loadList","num","api","sortInfos","res","common","caseFfName","item","width","flexShrink","setTimeout","id","Taro","phoneNumber","phone","moment","loading"],"mappings":"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","file":"pages/mine/cumulatReward/cumulatReward.js","sourcesContent":["import React, { useState } from \"react\";\nimport { connect } from 'react-redux';\nimport { ScrollView, View, } from \"@tarojs/components\";\nimport './cumulatReward.less';\nimport { CumulatListItem, CumulatRewardProps } from \"./cumulatRewardInterface\";\nimport NavBar from \"@/components/NavBar\";\nimport Taro, { useDidShow, } from '@tarojs/taro';\nimport api from '@/api/userApi';\nimport common from \"@/utils/common\";\nimport moment from \"moment\";\n\nconst stateList = ['待审核', '邀请成功', '审核失败'];\n\nconst CumulatReward: React.FC<CumulatRewardProps> = (props) => {\n\n  const { dispatch, mine } = props;\n  const { allRewardCount: count } = mine;\n\n  const [scrolling, setScrolling] = useState(true);\n  const [pageNum, setPageNum] = useState(0);\n  const [list, setList] = useState<CumulatListItem[]>([]);\n  const pageSize = 20;\n\n  useDidShow(() => {\n    dispatch({ type: \"mine/getAllRewardCount\" });\n    _loadList();\n  });\n\n  const _loadList = (num = pageNum) => {\n    api.queryInviteList({\n      pageNum: num,\n      pageSize,\n      sortInfos: [\n        {\n          \"field\": \"addTime\",\n          \"sort\": \"desc\"\n        }\n      ]\n    }).then(res => {\n      if (res) {\n        setPageNum(res.pageNum + 1);\n        setList(pre => res.pageNum > 0 ? [...pre, ...res.dataList] : res.dataList);\n      }\n    }).catch((err) => {\n      common.error(err)\n    })\n  }\n\n  const caseFfName = (item: CumulatListItem) => {\n    if (item.inviteState == 0) {\n      return '转介绍奖励'\n    }\n    return ['待发放', '已发放'][item.rewardState]\n  };\n\n  return <View className=\"cumulat\">\n\n    <NavBar title=\"推荐记录\" propBarStyle={{ width: '750rpx', flexShrink: 0, }} />\n\n    <View className=\"cu-1\">\n      <View className=\"cu-2\">累计介绍{count.allInviteCount || 0}人</View>\n      <View className=\"cu-2\">\n        其中审核成功{count.inviteSuccessCount || 0}人，\n        审核失败{count.inviteFailureCount || 0}人，待审核{count.inviteUnApplyCount || 0}人；\n      </View>\n      <View className=\"cu-2\">累计奖励{(count.allInviteReward || 0) / 100}元</View>\n      <View className=\"cu-2\">\n        其中已发放{((count.allInviteReward - count.unHandleReward) || 0) / 100}元，\n        待发放{(count.unHandleReward || 0) / 100}元。\n      </View>\n    </View>\n\n    <ScrollView\n      className=\"cu3\"\n      scrollY\n      refresherEnabled\n      refresherTriggered={scrolling}\n      onRefresherRefresh={() => {\n        setTimeout(() => {\n          setScrolling(false)\n        }, 2000);\n        setPageNum(0);\n        _loadList(0);\n      }}\n      onRefresherRestore={() => {\n        setScrolling(true)\n      }}\n      onScrollToLower={() => {\n        _loadList()\n      }}\n    >\n      {\n        list.map(item => <View className=\"cu5\" key={item.id}>\n          <View className=\"cu6\">\n            <View className=\"cu8\">{item.auntPossible.name}</View>\n            <View\n              className=\"cu9\"\n              onClick={() => {\n                Taro.makePhoneCall({ phoneNumber: item.auntPossible.phone })\n              }}\n            >\n              <View className=\"cu11\">{item.auntPossible.phone}</View>\n              <View className=\"iconfont icon-dianhua1 cu12\" />\n            </View>\n            <View className={`cu10 ${['cu10img', 'cu10succ', 'cu10err'][item.inviteState]}`}>\n              {stateList[item.inviteState]}\n            </View>\n          </View>\n          <View className=\"cu7\">\n            <View className=\"cu15\">注册时间: {item.addTime && moment(item.addTime).format('YYYY-MM-DD HH:mm')}</View>\n            {\n              item.inviteState != 2 && <React.Fragment>\n                <View className=\"cu15 cu17\">{caseFfName(item)}: </View>\n                <View className=\"cu16\">￥{(item.reward || 0) / 100}</View>\n              </React.Fragment>\n            }\n          </View>\n        </View>)\n      }\n    </ScrollView>\n\n  </View>\n\n}\n\n\nexport default connect(({ mine, dispatch, loading }) => ({\n  mine,\n  dispatch,\n  loading: loading.effects['findAunt/auntPossibleAdd'],\n}))(CumulatReward);\n","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../node_modules/@tarojs/mini-runner/node_modules/babel-loader/lib/index.js!./cumulatReward.tsx\"\nvar config = {\"navigationBarTitleText\":\"推荐记录\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/mine/cumulatReward/cumulatReward', {}, config || {}))\n\n"],"sourceRoot":""}