{"version":3,"sources":["webpack:///./src/pages/fetchOrderShareMessage/fetchOrderShareMessage.tsx","webpack:///./src/pages/fetchOrderShareMessage/fetchOrderShareMessage.tsx?c931","webpack:///./src/pages/fetchOrderShareMessage/index.scss"],"names":["FetchOrderShareMessage","connect","order","common","table","isGetPhone","optionsSync","Taro","console","scene","s","decodeURIComponent","p","parseQuery","paramId","type","payload","id","res","content","commonUtil","clueId","params","pageNum","pageSize","companyId","shopId","sortInfos","field","sort","success","tip","fail","err","title","dispatch","appId","code","encryptedData","info","iv","cancelColor","confirmColor","auntName","auntPhoto","auntPhone","shareId","path","phoneNumber","tel","latitude","longitude","address","name","scale","total","data","DefaultShopPic","moment","goMap","item","index","displayPartNumber","handleGetPhone","handleGetUserInfo","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAWqBA,sB,WAJpBC,oEAAO,CAAC;AAAA,MAAGC,KAAH;AAAA,MAAUC,MAAV;AAAA,MAAkBC,KAAlB;AAAA,SAA+B;AACtCF,SAAK,EADiC;AAC/BC,UAAM,EADyB;AACvBC,SAAK,EAALA;AADuB,GAA/B;AAAD,E;;;;;;;;;;;;;;;;0VAKM,K;;;;qVAEA,E;;sVACJ;AACNC,gBAAU,EADJ,MACa;;AADb,K;;qpBAYG;AAAA;;AAAA;AAAA;AAAA;AAAA;AACHC,yBADG,GACWC,oDAAI,CAAJA,4BADX,MACHD,CADG,CACoD;;AAC7DE,qBAAO,CAAPA;AACQC,mBAHC,GAGSH,WAHT,MAGDG;;AAER,yBAAW;AACT;AACMC,iBAFG,GAECC,kBAAkB,CAFnB,KAEmB,CAAtBD;AACAE,iBAHG,GAGMC,6EAAU,CAHhB,CAGgB,CAAnBD;AACNE,uBAAO,GAAGF,CAAC,CAAXE;AAJF,qBAKO;AACLA,uBAAO,GAAGR,WAAW,CAArBQ;AACD;;AAZQ;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAcW,qBAAoB;AAAEC,oBAAI,EAAN;AAAiCC,uBAAO,EAAE;AAAEC,oBAAE,EAAEH;AAAN;AAA1C,eAApB,CAdX;;AAAA;AAcDI,iBAdC,gBAcDA;AAdC,sBAeaA,GAAG,IAfhB,IAeCC,OAfD;AAgBDP,gBAhBC,GAgBQC,6EAAU,CAhBlB,OAgBkB,CAAnBD;AACN,kBAAIA,EAAC,CAAL,WAAiBQ,8DAAU,CAAVA,aAAwBR,EAAC,CAAzBQ;AACjB,kBAAIR,EAAC,CAAL,QAAcQ,8DAAU,CAAVA,UAAqBR,EAAC,CAAtBQ;AACd,kBAAIR,EAAC,CAAL,QAAc,eAAcA,EAAC,CAAf;;AAnBP;AAAA;AAAA;AAAA;AAAA;AAAA;;;4VAwBG,YAAM;AAClB,2BAAoB;AAClBG,YAAI,EADc;AAElBC,eAAO,EAAE;AAAEC,YAAE,EAAE,MAAKI;AAAX;AAFS,OAApB;;;0VAMU,YAAM;AAChB,2BAAoB;AAAEN,YAAI,EAAE;AAAR,OAApB;;;0VAGU,YAAM;AAChB,UAAIO,MAAM,GAAG;AACXC,eAAO,EADI;AAEXC,gBAAQ,EAFG;AAGXC,iBAAS,EAAEL,8DAAU,CAHV,YAGAA,EAHA;AAIXM,cAAM,EAAEN,8DAAU,CAJP,SAIHA,EAJG;AAKXO,iBAAS,EAAE,CACT;AACEC,eAAK,EADP;AAEEC,cAAI,EAAE;AAFR,SADS;AALA,OAAb;AAYA,aAAO,qBAAoB;AACzBd,YAAI,EADqB;AACSC,eAAO,EAAEM;AADlB,OAApB,QAEE,eAAO;AACdd,eAAO,CAAPA;AAHF,OAAO,CAAP;;;+VA0Ce,gBAAU;AACzBD,0DAAI,CAAJA,MAAW;AACTuB,eAAO,EAAE,sBAAS;AAChBvB,8DAAI,CAAJA;;AACA,cAAIW,GAAG,CAAP,MAAc;AACZV,mBAAO,CAAPA;;AACA,4BAAeU,GAAG,CAAlB;AAFF,iBAGO;AACLV,mBAAO,CAAPA,IAAY,UAAUU,GAAG,CAAzBV;AACAuB,uEAAG,CAAHA;AACD;AATM;AAWTC,YAAI,EAAE,mBAAS;AACbzB,8DAAI,CAAJA;AACAwB,qEAAG,CAAHA,SAAaE,GAAG,CAAhBF;AACD;AAdQ,OAAXxB;;;kWAmBkB,gBAAU;AAC5B,UAAI,MAAJ,WAAoB;AAClB;;AACA;AACD;;AACDA,0DAAI,CAAJA,YAAiB;AACf2B,aAAK,EAAE;AADQ,OAAjB3B;AAGAA,0DAAI,CAAJA,MAAW;AACTuB,eAAO,EAAE,sBAAS;AAChBvB,8DAAI,CAAJA;;AACA,cAAIW,GAAG,CAAP,MAAc;AACZV,mBAAO,CAAPA;;AACA,+BAAkBU,GAAG,CAArB;AAFF,iBAGO;AACLV,mBAAO,CAAPA,IAAY,UAAUU,GAAG,CAAzBV;AACAuB,uEAAG,CAAHA;AACD;AATM;AAWTC,YAAI,EAAE,mBAAS;AACbzB,8DAAI,CAAJA;AACAwB,qEAAG,CAAHA,SAAaE,GAAG,CAAhBF;AACD;AAdQ,OAAXxB;;;6VAmBa,sBAAgB;AAAA,UACrB4B,QADqB,GACR,MADQ,KACR,CADQ;AAE7B,UAAMb,MAAM,GAAG;AACbc,aAAK,EADQ;AAEbX,iBAAS,EAAEL,8DAAU,CAFR,YAEFA,EAFE;AAGbiB,YAAI,EAHS;AAIbC,qBAAa,EAAEC,IAAI,CAAJA,OAJF;AAKbC,UAAE,EAAED,IAAI,CAAJA,OAAYC;AALH,OAAf;AAQAjC,0DAAI,CAAJA,YAAiB;AACf2B,aAAK,EAAE;AADQ,OAAjB3B;AAGA4B,cAAQ,CAAC;AACPpB,YAAI,EADG;AAC6BC,eAAO,EAAEM;AADtC,OAAD,CAARa,MAEQ,eAAS;AACf5B,4DAAI,CAAJA;;AAEA,YAAIW,GAAG,CAAHA,YAAJ,GAAuB;AACrB,yBAAc;AAAEb,sBAAU,EAAE;AAAd,WAAd,EAAoC,YAAM;AACxCE,gEAAI,CAAJA,UAAe;AACb2B,mBAAK,EADQ;AAEbf,qBAAO,EAFM;AAGbsB,yBAAW,EAHE;AAIbC,0BAAY,EAAE;AAJD,aAAfnC;AADF;AADF,eASO,IAAIW,GAAG,CAAHA,YAAJ,GAAuB;AAC5B;;AACA;AACD;AAjBHiB,eAkBS,eAAS;AAChB5B,4DAAI,CAAJA;AACAwB,mEAAG,CAAHA,SAAaE,GAAG,CAAhBF;AApBFI;;;0VAyBU,sBAAgB;AAAA,UAClBA,QADkB,GACL,MADK,KACL,CADK;AAE1B,UAAMb,MAAM,GAAG;AACbc,aAAK,EADQ;AAEbX,iBAAS,EAAEL,8DAAU,CAFR,YAEFA,EAFE;AAGbiB,YAAI,EAHS;AAIbC,qBAAa,EAAEC,IAAI,CAAJA,OAJF;AAKbC,UAAE,EAAED,IAAI,CAAJA,OAAYC;AALH,OAAf;AAQAjC,0DAAI,CAAJA,YAAiB;AACf2B,aAAK,EAAE;AADQ,OAAjB3B;AAGA4B,cAAQ,CAAC;AACPpB,YAAI,EADG;AAC0BC,eAAO,EAAEM;AADnC,OAAD,CAARa,MAEQ,eAAS;AACf5B,4DAAI,CAAJA;AACA;;AACA;AALF4B,eAMS,eAAS;AAChB5B,4DAAI,CAAJA;AACAwB,mEAAG,CAAHA,SAAaE,GAAG,CAAhBF;AARFI;;;sVAaM,YAAM;AACZ,2BAAoB;AAClBpB,YAAI,EADc;AACIC,eAAO,EAAE;AAC7B2B,kBAAQ,EAAE,oBADmB;AAE7BC,mBAAS,EAAE,oBAFkB;AAG7BC,mBAAS,EAAE,gBAHkB;AAI7B5B,YAAE,EAAE,MAAKI;AAJoB;AADb,OAApB,OAOQ,eAAS;AACf,iBAAS;AACPU,qEAAG,CAAHA;;AACA;AACD;AAXH,eAYS,eAAS;AAChBA,mEAAG,CAAHA,SAAab,GAAG,CAAhBa;AAbF;;;upBAiBW;AAAA;AAAA;AAAA;AAAA;AAAA;AACLN,uBADK,GACOL,8DAAU,CADjB,YACOA,EAAZK;AACAC,oBAFK,GAEIN,8DAAU,CAFd,SAEIA,EAATM;AAFK;AAAA,qBAGO,qBAAoB;AACpCX,oBAAI,EADgC;AAEpCC,uBAAO,EAAE;AACPG,yBAAO,+EAAoD,MADpD,MACA,CADA;AAEPJ,sBAAI,EAAE;AAFC;AAF2B,eAApB,CAHP;;AAAA;AAGLG,iBAHK,iBAGLA;AAHK,gDAUJA,GAAG,CAVC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;8pBAaO;AAAA;AAAA;AAAA;AAAA;AAAA;AACVf,oBADU,GACC,MADD,KACC,CADD,MACVA;AADU;AAAA,qBAEI,MAFJ,UAEI,EAFJ;;AAAA;AAEZ2C,qBAFY,iBAEZA;AAFY,gDAGX;AACLZ,qBAAK,EAAE/B,MAAM,CAANA,SADF;AAEL4C,oBAAI;AAFC,eAHW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;4pBASF;AAAA;AAAA;AAAA;AAAA;AAAA;AACR5C,oBADQ,GACG,MADH,KACG,CADH,MACRA;AADQ;AAAA,qBAEM,MAFN,UAEM,EAFN;;AAAA;AAEV2C,qBAFU,iBAEVA;AAFU,gDAGT;AACLZ,qBAAK,EAAE/B,MAAM,CAANA,SADF;AAEL4C,oBAAI;AAFC,eAHS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;0VASN,eAAS;AACnBxC,0DAAI,CAAJA,cAAmB;AACjByC,mBAAW,EAAEC;AADI,OAAnB1C;;;sVAKM,YAAM;AAAA;;AAAA,UACJL,KADI,GACM,MADN,KACM,CADN;;AAEZ,UAAI,mBAACA,KAAK,CAAN,wDAACA,cAAL,OAAI,CAAJ,EAA4B;AAC1B;AACD;;AACDK,0DAAI,CAAJA,aAAkB;AAChB2C,gBAAQ,EAAEhD,KAAK,CAALA,OADM;AAEhBiD,iBAAS,EAAEjD,KAAK,CAALA,OAFK;AAGhBkD,eAAO,EAAElD,KAAK,CAALA,OAHO;AAIhBmD,YAAI,EAAEnD,KAAK,CAALA,OAJU;AAKhBoD,aAAK,EAAE;AALS,OAAlB/C;;;;;;;;;;;;;;;uBA5QM,e;;;AACN;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AA0DF;AACA;mCACe;AAAA;;AAAA,UACL4B,QADK,GACQ,KADR,KACQ,CADR;AAEb5B,0DAAI,CAAJA,MAAW;AACTuB,eAAO,EAAE,sBAAS;AAChB,cAAIZ,GAAG,CAAP,MAAc;AACZV,mBAAO,CAAPA;AACA,gBAAMc,MAAM,GAAG;AACbe,kBAAI,EAAEnB,GAAG,CADI;AAEbkB,mBAAK,EAFQ;AAGbX,uBAAS,EAAEL,8DAAU,CAHR,YAGFA,EAHE;AAIbM,oBAAM,EAAEN,8DAAU,CAAVA;AAJK,aAAf;AAMAe,oBAAQ,CAAC;AACPpB,kBAAI,EADG;AAC4BC,qBAAO,EAAEM;AADrC,aAAD,CAARa,MAEQ,eAAS;AACf,kBAAIjB,GAAG,CAAHA,YAAJ,GAAuB;AACrB,sBAAI,CAAJ,SAAc;AAAEb,4BAAU,EAAE;AAAd,iBAAd;AADF,qBAEO,IAAIa,GAAG,CAAHA,YAAJ,GAAuB;AAC5B,sBAAI,CAAJ;AACA,sBAAI,CAAJ;AACD;AARHiB;AARF,iBAkBO;AACL3B,mBAAO,CAAPA,IAAY,UAAUU,GAAG,CAAzBV;AACD;AAtBM;AAwBTwB,YAAI,EAAE,mBAAS;AACbxB,iBAAO,CAAPA,IAAY,UAAUyB,GAAG,CAAzBzB;AACD;AA1BQ,OAAXD;MA8BF;;;;6BAoLS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,wBAC0B,KAD1B;AAAA,UACCL,KADD;AAAA,UACQC,MADR;AAAA,UACgBC,KADhB;AAEP,UAAMmD,KAAK,GAAG,MAAK,KAAL,aAAK,UAAL,2CAAK,CAAL,0GAAd;AACA,UAAMC,IAAI,GAAG,MAAK,KAAL,aAAK,UAAL,4CAAK,CAAL,2GAAb;AACA,0BACE;AAAM,iBAAS,EAAC;AAAhB,sBACE;AAAQ,aAAK,EAAC;AAAd,QADF,eAEE;AAAM,iBAAS,EAAC;AAAhB,sBACE;AAAM,iBAAS,EAAC;AAAhB,sBACE;AAAM,iBAAS,EAAC;AAAhB,sBACE;AAAO,iBAAS,EAAhB;AACE,YAAI,EADN;AAEE,WAAG,EAAErD,MAAM,CAANA,oBAA2BsD,wEAAcA;AAFhD,QADF,CADF,eAOE;AAAM,iBAAS,EAAC;AAAhB,sBACE,sFAAM;AAAM,iBAAS,EAAC;AAAhB,SAA6BtD,MAAM,CAANA,SADrC,IACQ,CAAN,CADF,eAEE;AAAM,iBAAS,EAAC;AAAhB,sBAAoC,6JAV1C,oBAU0C,CAApC,CAFF,CAPF,CADF,eAaE;AAAM,iBAAS,EAAC;AAAhB,sBAA8B,0HAAOuD,8CAAM,WAACF,IAAI,CAAL,CAAK,CAAL,2CAACA,OAAPE,OAAM,CAANA,QAAP,OAAOA,CAAP,EAflC,cAekC,CAA9B,CAbF,CAFF,eAkBE;AAAM,iBAAS,EAAC;AAAhB,sBACE;AAAM,iBAAS,EAAC;AAAhB,sBACE;AAAM,iBAAS,EAAC;AAAhB,sBACE;AAAM,iBAAS,EAAC;AAAhB,sBACE,0HADF,gBACE,CADF,eAEE,4IAAOxD,KAAK,CAAZ,yDAAOA,eAHX,EAGI,CAFF,CADF,EAKG,wBAAK,CAAL,iGAAyB;AAAM,iBAAS,EAAC;AAAhB,sBACxB,+HAAQwD,8CAAM,CAACxD,KAAK,CAALA,OAAPwD,OAAM,CAANA,QAAR,qBAAQA,CAAR,EAPN,cAOM,CADwB,CAL5B,CADF,eAUE;AAAM,iBAAS,EAAf;AAAwC,eAAO,EAAE,KAAKC;AAAtD,sBACE;AAAM,iBAAS,EAAC;AAAhB,sBACE;AAAM,iBAAS,EAAC;AAAhB,sBACE,0HADF,6BACE,CADF,eACsB,0HAAO,CAAC,wBAAK,CAAL,wFAAD,QAAsC,gBAAI;AAAA,eAAIC,IAAI,CAAR;AAA1C,cAF/B,GAE+B,CAAP,CADtB,CADF,eAIE;AAAM,iBAAS,EAAC;AAAhB,sBACE,0HADF,6BACE,CADF,eACsB,0HAAO,wBAAK,CAAL,oFANjC,GAM0B,CADtB,CAJF,CADF,EASG,wBAAK,CAAL,iGAAyB;AAAM,iBAAS,EAAC;AAAhB,sBACxB;AAAM,iBAAS,EAAC;AAAhB,QADwB,CAT5B,CAVF,eAwBE;AAAM,iBAAS,EAAf;AAAwC,eAAO,EAAE,mBAAM;AAAA;;AAAE,gBAAI,CAAJ,4BAAe1D,KAAK,CAApB,yDAAeA,eAAf;AAA6C;AAAtG,sBACE;AAAM,iBAAS,EAAC;AAAhB,sBACE;AAAM,iBAAS,EAAC;AAAhB,QADF,eAEE;AAAM,iBAAS,EAAC;AAAhB,SAFF,uBAEE,CAFF,eAGE;AAAM,iBAAS,EAAC;AAAhB,2BAAwCA,KAAK,CAA7C,yDAAwCA,eAAxC,sCAAsEA,KAAK,CAA3E,yDAAsEA,eAAtE,eAJJ,GAII,CAHF,CADF,eAME;AAAM,iBAAS,EAAC;AAAhB,sBACE;AAAM,iBAAS,EAAC;AAAhB,QADF,CANF,CAxBF,CADF,CAlBF,EAwDG,CAAC,yBAAK,CAAL,2FAAD,+BAAiD;AAAM,iBAAS,EAAC;AAAhB,sBAChD;AAAM,iBAAS,EAAC;AAAhB,sBACE,0HAF8C,oBAE9C,CADF,CADgD,eAIhD;AAAM,iBAAS,EAAC;AAAhB,SAEI,CAAC,yBAAK,CAAL,2FAAD,QAAuC,uBAAiB;AACtD,4BACE;AAAM,mBAAS,EAAf;AAAuC,aAAG,EAAE2D;AAA5C,wBACE;AAAM,mBAAS,EAAC;AAAhB,wBACE;AAAO,mBAAS,EAAhB;AAAuB,aAAG,EAAED,IAAI,CAAJA,aAA5B;AAA8D,cAAI,EAAC;AAAnE,UADF,eAEE;AAAM,mBAAS,EAAC;AAAhB,WAAwBA,IAAI,CAHhC,QAGI,CAFF,CADF,eAKE;AAAM,mBAAS,EAAC;AAAhB,WAAyBE,oFAAiB,CAACF,IAAI,CANnD,SAM8C,CAA1C,CALF,CADF;AA/DV,OA8DQ,CAFJ,CAJgD,CAxDpD,eA6EE;AAAM,iBAAS,EAAC;AAAhB,sBACE;AACE,gBAAQ,EADV;AAEE,iBAAS,EAAC;AAFZ,sBAIE;AAAM,iBAAS,EAAC;AAAhB,QAJF,EADF,cACE,CADF,EAQI,qCACE;AACE,iBAAS,EADX;AAEE,gBAAQ,EAFV;AAGE,wBAAgB,EAAE,KAAKG;AAHzB,SADF,0BACE,CADF,gBAME;AACE,iBAAS,EADX;AAEE,gBAAQ,EAFV;AAGE,qBAAa,EAAE,KAAKC;AAHtB,SA5FV,0BA4FU,CAdN,CA7EF,CADF;AAqGD;;;;EAtYiDC,+C;;;;;;;;;;;;;;ACtBpD;AAAA;AAAA;AAAkD;AACmF;AACrI,cAAc;AACd,kJAAS;AACT,kJAAS;AACT,gBAAgB,wEAAgB,CAAC,kJAAS,2DAA2D,cAAc;;;;;;;;;;;;;ACLnH,uC","file":"pages/fetchOrderShareMessage/fetchOrderShareMessage.js","sourcesContent":["import React, { Component } from 'react';\nimport { Image, View, Text, Button, } from '@tarojs/components';\nimport { connect } from 'react-redux';\nimport Taro from \"@tarojs/taro\"\nimport NavBar from '@/components/NavBar'\nimport tip from '@/utils/tip';\nimport commonUtil from '@/utils/common';\nimport moment from 'moment'\nimport { displayPartNumber } from '@/utils/stringUtil'\nimport { parseQuery } from '@/utils/stringUtil'\nimport { DefaultUserPic, DefaultShopPic } from \"@/common/constant\"\nimport './index.scss';\ninterface PropsType {\n  dispatch;\n  order;\n  common;\n  table;\n}\n@connect(({ order, common, table }) => ({\n  order, common, table\n}))\n\nexport default class FetchOrderShareMessage extends Component<PropsType> {\n  skipLogin = false;//跳过登录\n  clueId: string;\n  user: any = {}//用户信息\n  state = {\n    isGetPhone: false, // 是否是获取手机号授权\n  }\n\n  async componentDidMount() {\n    await this.decodeID()\n    this.fetchDetail()\n    this.queryActType()\n    this.fetchShop()\n    this.fetchList()\n  }\n\n  decodeID = async () => {\n    const optionsSync = Taro.getCurrentInstance().router!.params;//获取页面参数\n    console.log(optionsSync, '=========进入小程序')\n    const { scene } = optionsSync;\n    let paramId: string;\n    if (scene) {\n      //扫小程序码进入\n      const s = decodeURIComponent(scene)\n      const p: any = parseQuery(s);\n      paramId = p.id;\n    } else {\n      paramId = optionsSync.id;\n    }\n    if (paramId) {\n      const res = await this.props.dispatch({ type: 'common/contentMapping', payload: { id: paramId } });\n      const { content } = res || {};\n      const p: any = parseQuery(content);\n      if (p.companyId) commonUtil.setCompanyId(p.companyId);\n      if (p.shopId) commonUtil.setShopId(p.shopId);\n      if (p.clueId) this.clueId = p.clueId\n    }\n\n  }\n\n  fetchDetail = () => {\n    this.props.dispatch({\n      type: 'order/getFetcherInfoDetail',\n      payload: { id: this.clueId }\n    });\n  }\n\n  fetchShop = () => {\n    this.props.dispatch({ type: 'common/getShopById' })\n  }\n\n  fetchList = () => {\n    let params = {\n      pageNum: 0,\n      pageSize: 10,\n      companyId: commonUtil.getCompanyId(),\n      shopId: commonUtil.getShopId(),\n      sortInfos: [\n        {\n          field: \"recruitTime\",\n          sort: \"desc\"\n        }\n      ]\n    }\n    return this.props.dispatch({\n      type: 'table/getFetcherInfoList', payload: params,\n    }).catch(err => {\n      console.log(err)\n    })\n  }\n\n  // 先通过静默授权  查询用户状态\n  // 需要操作的行为：1、需要显式授权；2、需要绑定手机号；3、已登录\n  queryActType() {\n    const { dispatch } = this.props;\n    Taro.login({\n      success: (res) => {\n        if (res.code) {\n          console.log('wx login ', res);\n          const params = {\n            code: res.code,\n            appId: APPID,\n            companyId: commonUtil.getCompanyId(),\n            shopId: commonUtil.getShopId()\n          }\n          dispatch({\n            type: 'authorization/miniSilence', payload: params,\n          }).then((res) => {\n            if (res.actType === 2) {\n              this.setState({ isGetPhone: true })\n            } else if (res.actType === 3) {\n              this.skipLogin = true;\n              this.user = res;\n            }\n          })\n        } else {\n          console.log('登录失败！' + res.errMsg)\n        }\n      },\n      fail: (err) => {\n        console.log('登录失败！' + err.errMsg)\n      }\n    })\n  }\n\n  // 微信授权获取手机号\n  handleGetPhone = (info) => {\n    Taro.login({\n      success: (res) => {\n        Taro.hideLoading()\n        if (res.code) {\n          console.log('wx login ', res);\n          this.miniPhone(res.code, info)\n        } else {\n          console.log('登录失败！' + res.errMsg)\n          tip.showTips('获取用户信息失败,请稍后重试')\n        }\n      },\n      fail: (err) => {\n        Taro.hideLoading()\n        tip.showTips(err.errMsg)\n      }\n    })\n  }\n\n  // 微信授权 获取用户信息\n  handleGetUserInfo = (info) => {\n    if (this.skipLogin) {\n      this.fetch();\n      return;\n    }\n    Taro.showLoading({\n      title: '获取中...'\n    })\n    Taro.login({\n      success: (res) => {\n        Taro.hideLoading()\n        if (res.code) {\n          console.log('wx login ', res);\n          this.miniExplicit(res.code, info)\n        } else {\n          console.log('登录失败！' + res.errMsg)\n          tip.showTips('获取用户信息失败,请稍后重试')\n        }\n      },\n      fail: (err) => {\n        Taro.hideLoading()\n        tip.showTips(err.errMsg)\n      }\n    })\n  }\n\n  // 小程序用户解密资料检测并初始化\n  miniExplicit = (code, info) => {\n    const { dispatch } = this.props;\n    const params = {\n      appId: APPID,\n      companyId: commonUtil.getCompanyId(),\n      code: code,\n      encryptedData: info.detail.encryptedData,\n      iv: info.detail.iv,\n    }\n\n    Taro.showLoading({\n      title: '获取中...'\n    })\n    dispatch({\n      type: 'authorization/miniExplicit', payload: params,\n    }).then((res) => {\n      Taro.hideLoading()\n\n      if (res.actType === 2) {\n        this.setState({ isGetPhone: true }, () => {\n          Taro.showModal({\n            title: '提示',\n            content: '您的微信还未绑定手机号,请再次点击立即抢单以绑定手机号',\n            cancelColor: '#333333',\n            confirmColor: '#f54949',\n          })\n        })\n      } else if (res.actType === 3) {\n        this.user = res;\n        this.fetch()\n      }\n    }).catch((err) => {\n      Taro.hideLoading()\n      tip.showTips(err.msg)\n    })\n  }\n\n  // 小程序用户根据加密数据获取用户手机号并初始化\n  miniPhone = (code, info) => {\n    const { dispatch } = this.props;\n    const params = {\n      appId: APPID,\n      companyId: commonUtil.getCompanyId(),\n      code,\n      encryptedData: info.detail.encryptedData,\n      iv: info.detail.iv,\n    }\n\n    Taro.showLoading({\n      title: '获取中...'\n    })\n    dispatch({\n      type: 'authorization/miniPhone', payload: params,\n    }).then((res) => {\n      Taro.hideLoading()\n      this.user = res;\n      this.fetch()\n    }).catch((err) => {\n      Taro.hideLoading()\n      tip.showTips(err.msg)\n    })\n  }\n\n  //抢单\n  fetch = () => {\n    this.props.dispatch({\n      type: 'order/getNow', payload: {\n        auntName: this.user.fansInfo.nickName,\n        auntPhoto: this.user.fansInfo.headImgUrl,\n        auntPhone: this.user.user.phone,\n        id: this.clueId\n      },\n    }).then((res) => {\n      if (res) {\n        tip.showTips('抢单成功！')\n        this.fetchDetail();\n      }\n    }).catch((res) => {\n      tip.showTips(res.msg)\n    })\n  }\n\n  getShareId = async () => {\n    const companyId = commonUtil.getCompanyId();\n    const shopId = commonUtil.getShopId();\n    const res = await this.props.dispatch({\n      type: 'common/contentMappingAdd',\n      payload: {\n        content: `companyId=${companyId}&shopId=${shopId}&clueId=${this.clueId}`,\n        type: 1\n      }\n    });\n    return res.id\n  }\n\n  onShareAppMessage = async () => {\n    const { common } = this.props;\n    const shareId = await this.getShareId();\n    return {\n      title: common.shopInfo.name,\n      path: `/pages/fetchOrderShareMessage/fetchOrderShareMessage?id=${shareId}`,\n    };\n  }\n\n  onShareTimeline = async () => {\n    const { common } = this.props;\n    const shareId = await this.getShareId();\n    return {\n      title: common.shopInfo.name,\n      path: `/pages/fetchOrderShareMessage/fetchOrderShareMessage?id=${shareId}`,\n    };\n  }\n\n  callPhone = (tel) => {\n    Taro.makePhoneCall({\n      phoneNumber: tel\n    })\n  }\n\n  goMap = () => {\n    const { order } = this.props;\n    if (!order.detail?.address) {\n      return;\n    }\n    Taro.openLocation({\n      latitude: order.detail.latitude,\n      longitude: order.detail.longitude,\n      address: order.detail.address,\n      name: order.detail.name,\n      scale: 18\n    })\n  }\n  render() {\n    const { order, common, table } = this.props;\n    const total = table?.fetcherInfo_list?.total || 0;\n    const data = table?.fetcherInfo_list?.data || [];\n    return (\n      <View className=\"orderDetail fixedView\">\n        <NavBar title=\"\" />\n        <View className=\"company\">\n          <View className=\"companyInfo\">\n            <View className=\"left_image\">\n              <Image className=\"left_image_style\"\n                mode=\"aspectFit\"\n                src={common.shopInfo.logoUrl || DefaultShopPic}\n              />\n            </View>\n            <View className=\"left_info\">\n              <view><Text className=\"text_name\">{common.shopInfo.name}</Text></view>\n              <view className=\"text_order_number\"><Text>该企业有{total}笔订单</Text></view>\n            </View>\n          </View>\n          <View className=\"companyTime\"><Text>{moment(data[0]?.addTime).format('MM-DD')}更新</Text></View>\n        </View>\n\n        <View className=\"content_main\">\n          <View className=\"dispatch_owner\">\n            <View className=\"dispatch_owner_top\">\n              <View className=\"name\">\n                <Text>编号: </Text>\n                <Text>{order.detail?.id}</Text>\n              </View>\n              {order.detail?.addTime && <View className=\"time\">\n                <Text> {moment(order.detail.addTime).format(\"YYYY.MM.DD HH:mm:ss\")}发布</Text>\n              </View>}\n            </View>\n            <View className=\"dispatch_owner_center\" onClick={this.goMap}>\n              <View className=\"left\">\n                <View className=\"item\">\n                  <Text>客户需求 : </Text><Text>{(order.detail?.productList || []).map(item => item.name).join('、')}</Text>\n                </View>\n                <View className=\"item\">\n                  <Text>服务地址 : </Text><Text>{order.detail?.address || '-'}</Text>\n                </View>\n              </View>\n              {order.detail?.address && <View className=\"icon\">\n                <Text className=\"iconfont iconyoujiantou\"></Text>\n              </View>}\n\n            </View>\n            <View className=\"dispatch_owner_bottom\" onClick={() => { this.callPhone(order.detail?.dealUserPhone) }}>\n              <View className=\"dispatch_owner_info\">\n                <Text className=\"iconfont icon-jiaose\"></Text>\n                <Text className=\"dispatch_person\">发活人 : </Text>\n                <Text className=\"dispatch_person_name\">{order.detail?.dealUserName} ({order.detail?.dealUserPhone})</Text>\n              </View>\n              <View className=\"dispatch_owner_icon\">\n                <Text className=\"iconfont iconphone6dianhua\"></Text>\n              </View>\n            </View>\n          </View>\n        </View>\n\n        {(order.detail?.grabAuntList || []).length > 0 && <View className=\"content_fetcher_list\">\n          <View className=\"dispatcher_title\">\n            <Text>抢单人</Text>\n          </View>\n          <View className=\"dispatcher_fetcher_detail\">\n            {\n              (order.detail?.grabAuntList || []).map((item, index) => {\n                return (\n                  <View className=\"fetcher_detail_style\" key={index}>\n                    <View className=\"name\">\n                      <Image className=\"img\" src={item.auntPhoto || DefaultUserPic} mode=\"aspectFill\" />\n                      <Text className=\"text\">{item.auntName}</Text>\n                    </View>\n                    <Text className=\"phone\">{displayPartNumber(item.auntPhone)}</Text>\n                  </View>\n                )\n              })\n            }\n          </View>\n        </View>}\n\n        <View className=\"fixedBtnView btnFooter\">\n          <Button\n            openType='share'\n            className=\"share_button\"\n          >\n            <Text className=\"iconfont iconicon-test\"></Text>转发\n          </Button>\n          {\n            this.state.isGetPhone ?\n              <Button\n                className=\"fetch_button\"\n                openType='getPhoneNumber'\n                onGetPhoneNumber={this.handleGetPhone}\n              >立即抢单</Button> :\n              <Button\n                className=\"fetch_button\"\n                openType='getUserInfo'\n                onGetUserInfo={this.handleGetUserInfo}\n              >立即抢单</Button>\n          }\n        </View>\n      </View>\n    );\n  }\n}\n\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/mini-runner/node_modules/babel-loader/lib/index.js!./fetchOrderShareMessage.tsx\"\nvar config = {\"enableShareAppMessage\":true,\"enableShareTimeline\":true};\ncomponent.enableShareTimeline = true\ncomponent.enableShareAppMessage = true\nvar inst = Page(createPageConfig(component, 'pages/fetchOrderShareMessage/fetchOrderShareMessage', {}, config || {}))\n\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}